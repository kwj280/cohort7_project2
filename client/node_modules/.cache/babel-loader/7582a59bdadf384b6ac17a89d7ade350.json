{"ast":null,"code":"import _slicedToArray from\"/home/woojae/cohort7_project2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import MuiTextField from'@mui/material/TextField';import Button from'@mui/material/Button';import axios from'axios';import{styled}from'@mui/system';import{useState}from'react';import{Grid,IconButton,Typography}from'@mui/material';import{Box}from'@mui/system';import{Avatar}from'@mui/material';import{useRef,useEffect}from'react';import Collapse from'@mui/material/Collapse';import WorkExperienceForm from\"./WorkExperienceForm\";import AddIcon from'@mui/icons-material/Add';import CloseIcon from'@mui/icons-material/Close';import SkillsForm from'./SkillsForm';import InterestsForm from'./InterestsForm';import LinksForm from'./LinksForm';//import {useForm, Controller} from \"react-hook-form\"\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TextField=styled(MuiTextField)({width:'100%'});var ListItem=styled('li')(function(_ref){var theme=_ref.theme;return{margin:theme.spacing(0.5),float:'left'};});var ProfileForm=function ProfileForm(_ref2){var _user$firstName,_user$lastName;var user=_ref2.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],_setImage=_useState4[1];var profileImg=useRef(null);var _useState5=useState((_user$firstName=user===null||user===void 0?void 0:user.firstName)!==null&&_user$firstName!==void 0?_user$firstName:''),_useState6=_slicedToArray(_useState5,2),firstName=_useState6[0],setFirstName=_useState6[1];var _useState7=useState((_user$lastName=user===null||user===void 0?void 0:user.lastName)!==null&&_user$lastName!==void 0?_user$lastName:''),_useState8=_slicedToArray(_useState7,2),lastName=_useState8[0],setLastName=_useState8[1];useEffect(function(){axios.get('/profile/getByUserId/'+user._id).then(function(res){setProfile(res.data);});},[]);useEffect(function(){if(profile===null||profile===void 0?void 0:profile.profile_picture){var img=profile.profile_picture;var buf=Buffer.from(img.data);var imgSrc=buf.toString('utf8');setImage(imgSrc);}// _setImage(profile.profile_picture)\n},[profile]);var cleanup=function cleanup(){URL.revokeObjectURL(image);profileImg.current.value=null;};var setImage=function setImage(newImage){if(image){cleanup();}_setImage(newImage);};var handleOnChange=function handleOnChange(event){var _event$target,_event$target$files;var newImage=(_event$target=event.target)===null||_event$target===void 0?void 0:(_event$target$files=_event$target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(newImage){var reader=new FileReader();reader.onloadend=function(){console.log(reader.result);axios.put('/profile/updateProfilePicture',{_id:profile._id,profile_picture:reader.result}).then(function(res){console.log(res);});};reader.readAsDataURL(newImage);// newImage.text().then(img => {\n//   console.log(img)\n// })\nsetImage(URL.createObjectURL(newImage));}};var onProfilePictureClick=function onProfilePictureClick(){profileImg.current.click();};//add value to list\nvar clickAddButton=function clickAddButton(value,setValue,setValues){setValues(function(values){if(values&&value&&!values.includes(value))return values.concat(value);return values;});setValue('');};var handleDelete=function handleDelete(chipToDelete,setter){return function(){setter(function(chips){return chips.filter(function(chip){return chip!==chipToDelete;});});};};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Box,{sx:{maxWidth:'55%'},children:/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"center\",alignItems:\"center\",rowSpacing:2,columnSpacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,container:true,justifyContent:\"center\",children:/*#__PURE__*/_jsxs(IconButton,{onClick:onProfilePictureClick,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",ref:profileImg,onChange:handleOnChange,style:{display:'none'}}),/*#__PURE__*/_jsx(Avatar,{sx:{width:150,height:150},alt:\"Name\",src:image||\"/broken-image.jpg\",children:\"User\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,container:true,justifyContent:\"center\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\" \",user===null||user===void 0?void 0:user.email,\" \"]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,container:true,justifyContent:\"center\",sx:{marginBottom:\"2em\"},children:/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\" \",user===null||user===void 0?void 0:user.firstName,\" \",user===null||user===void 0?void 0:user.lastName,\" \"]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(SkillsForm,{profile:profile,setProfile:setProfile})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(InterestsForm,{profile:profile,setProfile:setProfile})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(WorkExperienceForm,{profile:profile,setProfile:setProfile})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(LinksForm,{profile:profile,setProfile:setProfile})})]})})});};export default ProfileForm;","map":{"version":3,"sources":["/home/woojae/cohort7_project2/client/src/components/ProfileForm.js"],"names":["MuiTextField","Button","axios","styled","useState","Grid","IconButton","Typography","Box","Avatar","useRef","useEffect","Collapse","WorkExperienceForm","AddIcon","CloseIcon","SkillsForm","InterestsForm","LinksForm","TextField","width","ListItem","theme","margin","spacing","float","ProfileForm","user","profile","setProfile","image","_setImage","profileImg","firstName","setFirstName","lastName","setLastName","get","_id","then","res","data","profile_picture","img","buf","Buffer","from","imgSrc","toString","setImage","cleanup","URL","revokeObjectURL","current","value","newImage","handleOnChange","event","target","files","reader","FileReader","onloadend","console","log","result","put","readAsDataURL","createObjectURL","onProfilePictureClick","click","clickAddButton","setValue","setValues","values","includes","concat","handleDelete","chipToDelete","setter","chips","filter","chip","maxWidth","display","height","email","marginBottom"],"mappings":"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","sourcesContent":["import MuiTextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport axios from 'axios'\nimport { styled } from '@mui/system';\nimport { useState } from 'react'\nimport { Grid, IconButton, Typography } from '@mui/material';\nimport { Box } from '@mui/system';\nimport { Avatar } from '@mui/material';\nimport { useRef, useEffect } from 'react';\nimport Collapse from '@mui/material/Collapse';\nimport WorkExperienceForm from \"./WorkExperienceForm\";\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\nimport SkillsForm from './SkillsForm'\nimport InterestsForm from './InterestsForm';\nimport LinksForm from './LinksForm';\n\n//import {useForm, Controller} from \"react-hook-form\"\n\nconst TextField = styled(MuiTextField)({\n  width: '100%'\n});\nconst ListItem = styled('li')(({ theme }) => ({\n  margin: theme.spacing(0.5),\n  float: 'left',\n}));\n\n\n\n\nconst ProfileForm = ({ user }) => {\n  const [profile, setProfile] = useState(null);\n  const [image, _setImage] = useState(null);\n  const profileImg = useRef(null)\n  const [firstName, setFirstName] = useState(user?.firstName ?? '')\n  const [lastName, setLastName] = useState(user?.lastName ?? '')\n\n\n\n\n  useEffect(() => {\n    axios.get('/profile/getByUserId/' + user._id).then(res => {\n      setProfile(res.data)\n    })\n  }, [])\n\n  useEffect(() => {\n    if (profile?.profile_picture) {\n      let img = profile.profile_picture\n      const buf = Buffer.from(img.data)\n      let imgSrc = buf.toString('utf8');\n      setImage(imgSrc)\n    }\n    // _setImage(profile.profile_picture)\n  }, [profile])\n  const cleanup = () => {\n    URL.revokeObjectURL(image);\n    profileImg.current.value = null;\n  };\n\n  const setImage = (newImage) => {\n    if (image) {\n      cleanup();\n    }\n    _setImage(newImage);\n  };\n\n  const handleOnChange = (event) => {\n    const newImage = event.target?.files?.[0];\n    if (newImage) {\n\n      var reader = new FileReader();\n      reader.onloadend = function () {\n        console.log(reader.result)\n        axios.put('/profile/updateProfilePicture', { _id: profile._id, profile_picture: reader.result }).then(res => {\n          console.log(res)\n        })\n      }\n      reader.readAsDataURL(newImage);\n\n\n      // newImage.text().then(img => {\n      //   console.log(img)\n\n      // })\n      setImage(URL.createObjectURL(newImage));\n    }\n\n\n  };\n  const onProfilePictureClick = () => {\n    profileImg.current.click();\n  };\n\n  //add value to list\n  const clickAddButton = (value, setValue, setValues) => {\n    setValues(values => {\n      if (values && value && !values.includes(value))\n        return values.concat(value)\n      return values\n    })\n    setValue('')\n  }\n\n  const handleDelete = (chipToDelete, setter) => () => {\n    setter((chips) => chips.filter((chip) => chip !== chipToDelete));\n  };\n  return (\n    <>\n      <Box sx={{ maxWidth: '55%' }}>\n        <Grid\n          container\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          rowSpacing={2}\n          columnSpacing={2}\n        >\n          <Grid item xs={12} container justifyContent=\"center\">\n            <IconButton onClick={onProfilePictureClick}>\n              <input type='file' id='file' ref={profileImg} onChange={handleOnChange} style={{ display: 'none' }} />\n              <Avatar\n                sx={{ width: 150, height: 150 }}\n                alt=\"Name\"\n                src={image || \"/broken-image.jpg\"}\n              >\n                User\n              </Avatar>\n            </IconButton>\n          </Grid>\n          <Grid item xs={12} container justifyContent=\"center\" >\n            <Typography variant=\"h6\"> {user?.email} </Typography>\n          </Grid>\n          <Grid item xs={12} container justifyContent=\"center\" sx={{ marginBottom: \"2em\" }}>\n            <Typography variant=\"h6\"> {user?.firstName} {user?.lastName} </Typography>\n          </Grid>\n\n          {/************************************SKILLS************************************/}\n          <Grid item xs={12}>\n            <SkillsForm profile={profile} setProfile={setProfile}/>\n          </Grid>\n          {/**********************************Interests***********************************/}\n          <Grid item xs={12}>\n            <InterestsForm profile={profile} setProfile={setProfile}/>\n          </Grid>\n\n          {/**********************************Projects***********************************/}\n\n          <Grid item xs={12}>\n              <WorkExperienceForm  profile={profile} setProfile={setProfile} />\n          </Grid>\n\n          {/**********************************Links***********************************/}\n         \n         <Grid item xs={12}>\n           <LinksForm  profile={profile} setProfile={setProfile}/>\n         </Grid>\n        </Grid>\n      </Box>\n    </>\n\n  );\n};\n\n\n\nexport default ProfileForm"]},"metadata":{},"sourceType":"module"}