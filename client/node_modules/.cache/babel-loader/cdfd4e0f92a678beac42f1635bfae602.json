{"ast":null,"code":"import _slicedToArray from\"/home/woojae/cohort7_project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{makeStyles}from'@material-ui/core';import MuiTextField from'@mui/material/TextField';import Button from'@mui/material/Button';import axios from'axios';import{styled}from'@mui/system';import{useState}from'react';import{Grid,IconButton,Typography}from'@mui/material';import{Box}from'@mui/system';import{Avatar}from'@mui/material';import{useRef,useEffect}from'react';import AutoCompleteInput from'./AutoCompleteInput';import Chip from'@mui/material/Chip';import Collapse from'@mui/material/Collapse';import WorkExperienceForm from\"./WorkExperienceForm\";import Switch from'@mui/material/Switch';import AddIcon from'@mui/icons-material/Add';import CloseIcon from'@mui/icons-material/Close';//import {useForm, Controller} from \"react-hook-form\"\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TextField=styled(MuiTextField)({width:'100%'});var ListItem=styled('li')(function(_ref){var theme=_ref.theme;return{margin:theme.spacing(0.5),float:'left'};});var skillOptions=['HTML','CSS','Javascript','Node','React','MongoDB'];var interestOptions=['Machine Learning','Big Data','System Design','Load Balancing','UI design'];var ProfileForm=function ProfileForm(_ref2){var _user$firstName,_user$lastName;var user=_ref2.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],_setImage=_useState4[1];var profileImg=useRef(null);var _useState5=useState((_user$firstName=user===null||user===void 0?void 0:user.firstName)!==null&&_user$firstName!==void 0?_user$firstName:''),_useState6=_slicedToArray(_useState5,2),firstName=_useState6[0],setFirstName=_useState6[1];var _useState7=useState((_user$lastName=user===null||user===void 0?void 0:user.lastName)!==null&&_user$lastName!==void 0?_user$lastName:''),_useState8=_slicedToArray(_useState7,2),lastName=_useState8[0],setLastName=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),skill=_useState10[0],setSkill=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),skills=_useState12[0],setSkills=_useState12[1];var addSkillBtnRef=useRef();var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),interest=_useState14[0],setInterest=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),interests=_useState16[0],setInterests=_useState16[1];var addInterestBtnRef=useRef();var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showWorkExperienceForm=_useState18[0],setShowWorkExperienceForm=_useState18[1];useEffect(function(){axios.get('/profile/getByUserId/'+user._id).then(function(res){setProfile(res.data);});},[]);useEffect(function(){if(profile===null||profile===void 0?void 0:profile.profile_picture){var img=profile.profile_picture;var buf=Buffer.from(img.data);var imgSrc=buf.toString('utf8');setImage(imgSrc);}// _setImage(profile.profile_picture)\n},[profile]);var cleanup=function cleanup(){URL.revokeObjectURL(image);profileImg.current.value=null;};var setImage=function setImage(newImage){if(image){cleanup();}_setImage(newImage);};var handleOnChange=function handleOnChange(event){var _event$target,_event$target$files;var newImage=(_event$target=event.target)===null||_event$target===void 0?void 0:(_event$target$files=_event$target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(newImage){var reader=new FileReader();reader.onloadend=function(){console.log(reader.result);axios.put('/profile/updateProfilePicture',{_id:profile._id,profile_picture:reader.result}).then(function(res){console.log(res);});};reader.readAsDataURL(newImage);// newImage.text().then(img => {\n//   console.log(img)\n// })\nsetImage(URL.createObjectURL(newImage));}};var onProfilePictureClick=function onProfilePictureClick(){profileImg.current.click();};//add value to list\nvar clickAddButton=function clickAddButton(value,setValue,setValues){setValues(function(values){if(values&&value&&!values.includes(value))return values.concat(value);return values;});setValue('');};var handleDelete=function handleDelete(chipToDelete,setter){return function(){setter(function(chips){return chips.filter(function(chip){return chip!==chipToDelete;});});};};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Box,{sx:{maxWidth:'50%'},children:/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"center\",alignItems:\"center\",rowSpacing:2,columnSpacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,container:true,justifyContent:\"center\",children:/*#__PURE__*/_jsxs(IconButton,{onClick:onProfilePictureClick,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",ref:profileImg,onChange:handleOnChange,style:{display:'none'}}),/*#__PURE__*/_jsx(Avatar,{sx:{width:150,height:150},alt:\"Name\",src:image||\"/broken-image.jpg\",children:\"User\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,container:true,justifyContent:\"center\",sx:{marginBottom:\"2em\"},children:/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\" \",user===null||user===void 0?void 0:user.email,\" \"]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{label:\"First Name\",variant:\"outlined\",value:firstName})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{label:\"Last Name\",variant:\"outlined\",value:lastName})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:/*#__PURE__*/_jsx(AutoCompleteInput,{selectLabel:\"Skills\",optionList:skillOptions,value:skill,setValue:setSkill,buttonRef:addSkillBtnRef})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(Button,{variant:\"text\",ref:addSkillBtnRef,onClick:function onClick(){return clickAddButton(skill,setSkill,setSkills);},children:\"ADD\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,container:true,sx:{listStyle:'none'},children:skills.map(function(skill){return/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(Chip,{label:skill,onDelete:handleDelete(skill,setSkills)})},skill);})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:/*#__PURE__*/_jsx(AutoCompleteInput,{selectLabel:\"Interests\",optionList:interestOptions,value:interest,setValue:setInterest,buttonRef:addInterestBtnRef})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(Button,{variant:\"text\",ref:addInterestBtnRef,onClick:function onClick(){return clickAddButton(interest,setInterest,setInterests);},children:\"ADD\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,container:true,sx:{listStyle:'none'},children:interests.map(function(interest){return/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(Chip,{label:interest,onDelete:handleDelete(interest,setInterests)})},interest);})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:/*#__PURE__*/_jsx(\"h4\",{children:\"Project/Work Experience\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setShowWorkExperienceForm(function(prev){return!prev;});},children:!showWorkExperienceForm?/*#__PURE__*/_jsx(AddIcon,{}):/*#__PURE__*/_jsx(CloseIcon,{})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Collapse,{in:showWorkExperienceForm,children:/*#__PURE__*/_jsx(WorkExperienceForm,{setShowWorkExperienceForm:setShowWorkExperienceForm})})})]})})});};export default ProfileForm;","map":{"version":3,"sources":["/home/woojae/cohort7_project2/src/components/ProfileForm.js"],"names":["makeStyles","MuiTextField","Button","axios","styled","useState","Grid","IconButton","Typography","Box","Avatar","useRef","useEffect","AutoCompleteInput","Chip","Collapse","WorkExperienceForm","Switch","AddIcon","CloseIcon","TextField","width","ListItem","theme","margin","spacing","float","skillOptions","interestOptions","ProfileForm","user","profile","setProfile","image","_setImage","profileImg","firstName","setFirstName","lastName","setLastName","skill","setSkill","skills","setSkills","addSkillBtnRef","interest","setInterest","interests","setInterests","addInterestBtnRef","showWorkExperienceForm","setShowWorkExperienceForm","get","_id","then","res","data","profile_picture","img","buf","Buffer","from","imgSrc","toString","setImage","cleanup","URL","revokeObjectURL","current","value","newImage","handleOnChange","event","target","files","reader","FileReader","onloadend","console","log","result","put","readAsDataURL","createObjectURL","onProfilePictureClick","click","clickAddButton","setValue","setValues","values","includes","concat","handleDelete","chipToDelete","setter","chips","filter","chip","maxWidth","display","height","marginBottom","email","listStyle","map","prev"],"mappings":"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","sourcesContent":["import { makeStyles } from '@material-ui/core';\nimport MuiTextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport axios from 'axios'\nimport { styled } from '@mui/system';\nimport { useState } from 'react'\nimport { Grid, IconButton, Typography } from '@mui/material';\nimport { Box } from '@mui/system';\nimport { Avatar } from '@mui/material';\nimport { useRef, useEffect } from 'react';\nimport AutoCompleteInput from './AutoCompleteInput'\nimport Chip from '@mui/material/Chip';\nimport Collapse from '@mui/material/Collapse';\nimport WorkExperienceForm from \"./WorkExperienceForm\";\nimport Switch from '@mui/material/Switch';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\n//import {useForm, Controller} from \"react-hook-form\"\n\nconst TextField = styled(MuiTextField)({\n  width: '100%'\n});\nconst ListItem = styled('li')(({ theme }) => ({\n  margin: theme.spacing(0.5),\n  float: 'left',\n}));\n\n\nconst skillOptions = ['HTML', 'CSS', 'Javascript', 'Node', 'React', 'MongoDB'];\nconst interestOptions = ['Machine Learning', 'Big Data', 'System Design', 'Load Balancing', 'UI design']\n\n\nconst ProfileForm = ({ user }) => {\n  const [profile, setProfile] = useState(null);\n  const [image, _setImage] = useState(null);\n  const profileImg = useRef(null)\n  const [firstName, setFirstName] = useState(user?.firstName ?? '')\n  const [lastName, setLastName] = useState(user?.lastName ?? '')\n\n  const [skill, setSkill] = useState('');\n  const [skills, setSkills] = useState([])\n  const addSkillBtnRef = useRef()\n\n  const [interest, setInterest] = useState('');\n  const [interests, setInterests] = useState([])\n  const addInterestBtnRef = useRef()\n\n  const [showWorkExperienceForm, setShowWorkExperienceForm] = useState(false);\n  useEffect(() => {\n    axios.get('/profile/getByUserId/' + user._id).then(res => {\n      setProfile(res.data)\n    })\n  }, [])\n\n  useEffect(() => {\n    if (profile?.profile_picture) {\n      let img = profile.profile_picture\n      const buf = Buffer.from(img.data)\n      let imgSrc = buf.toString('utf8');\n      setImage(imgSrc)\n    }\n    // _setImage(profile.profile_picture)\n  }, [profile])\n  const cleanup = () => {\n    URL.revokeObjectURL(image);\n    profileImg.current.value = null;\n  };\n\n  const setImage = (newImage) => {\n    if (image) {\n      cleanup();\n    }\n    _setImage(newImage);\n  };\n\n  const handleOnChange = (event) => {\n    const newImage = event.target?.files?.[0];\n    if (newImage) {\n\n      var reader = new FileReader();\n      reader.onloadend = function () {\n        console.log(reader.result)\n        axios.put('/profile/updateProfilePicture', { _id: profile._id, profile_picture: reader.result }).then(res => {\n          console.log(res)\n        })\n      }\n      reader.readAsDataURL(newImage);\n\n\n      // newImage.text().then(img => {\n      //   console.log(img)\n        \n      // })\n      setImage(URL.createObjectURL(newImage));\n    }\n\n\n  };\n  const onProfilePictureClick = () => {\n    profileImg.current.click();\n  };\n\n  //add value to list\n  const clickAddButton = (value, setValue, setValues) => {\n    setValues(values => {\n      if (values && value && !values.includes(value))\n        return values.concat(value)\n      return values\n    })\n    setValue('')\n  }\n\n  const handleDelete = (chipToDelete, setter) => () => {\n    setter((chips) => chips.filter((chip) => chip !== chipToDelete));\n  };\n  return (\n    <>\n      <Box sx={{ maxWidth: '50%' }}>\n        <Grid\n          container\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          rowSpacing={2}\n          columnSpacing={2}\n        >\n          <Grid item xs={12} container justifyContent=\"center\">\n            <IconButton onClick={onProfilePictureClick}>\n              <input type='file' id='file' ref={profileImg} onChange={handleOnChange} style={{ display: 'none' }} />\n              <Avatar\n                sx={{ width: 150, height: 150 }}\n                alt=\"Name\"\n                src={image || \"/broken-image.jpg\"}\n              >\n                User\n              </Avatar>\n            </IconButton>\n          </Grid>\n          <Grid item xs={12} container justifyContent=\"center\" sx={{ marginBottom: \"2em\" }}>\n            <Typography variant=\"h6\"> {user?.email} </Typography>\n          </Grid>\n          <Grid item xs={6}>\n            <TextField\n              label=\"First Name\"\n              variant=\"outlined\"\n              value={firstName}\n            />\n          </Grid>\n          <Grid item xs={6}>\n            <TextField\n              label=\"Last Name\"\n              variant=\"outlined\"\n              value={lastName}\n            />\n          </Grid>\n          <Grid item xs={10}>\n            <AutoCompleteInput\n              selectLabel={\"Skills\"}\n              optionList={skillOptions}\n              value={skill}\n              setValue={setSkill}\n              buttonRef={addSkillBtnRef} />\n          </Grid>\n          <Grid item xs={2}>\n            <Button variant=\"text\" ref={addSkillBtnRef} onClick={() => clickAddButton(skill, setSkill, setSkills)}>ADD</Button>\n          </Grid>\n          <Grid item xs={12} container sx={{ listStyle: 'none' }}>\n            {skills.map(skill => {\n              return (\n                <ListItem key={skill}>\n                  <Chip\n                    label={skill}\n                    onDelete={handleDelete(skill, setSkills)}\n                  />\n                </ListItem>\n              )\n            })}\n          </Grid>\n\n          <Grid item xs={10}>\n            <AutoCompleteInput selectLabel={\"Interests\"}\n              optionList={interestOptions}\n              value={interest}\n              setValue={setInterest}\n              buttonRef={addInterestBtnRef}\n            />\n          </Grid>\n          <Grid item xs={2}>\n            <Button variant=\"text\" ref={addInterestBtnRef} onClick={() => clickAddButton(interest, setInterest, setInterests)}>ADD</Button>\n          </Grid>\n          <Grid item xs={12} container sx={{ listStyle: 'none' }}>\n            {interests.map(interest => {\n              return (\n                <ListItem key={interest}>\n                  <Chip\n                    label={interest}\n                    onDelete={handleDelete(interest, setInterests)}\n                  />\n                </ListItem>\n              )\n            })}\n          </Grid>\n          <Grid item xs={10}>\n            <h4>Project/Work Experience</h4>\n          </Grid>\n          <Grid item xs={2}>\n            <Button onClick={() => setShowWorkExperienceForm((prev) => !prev)}>\n              {!showWorkExperienceForm ? <AddIcon /> : <CloseIcon />}\n            </Button>\n          </Grid>\n          <Grid item xs={12}>\n            <Collapse in={showWorkExperienceForm}>\n              <WorkExperienceForm setShowWorkExperienceForm={setShowWorkExperienceForm} />\n            </Collapse>\n          </Grid>\n\n\n\n        </Grid>\n      </Box>\n    </>\n\n  );\n};\n\n\n\nexport default ProfileForm"]},"metadata":{},"sourceType":"module"}